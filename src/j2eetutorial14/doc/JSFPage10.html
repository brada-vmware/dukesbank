<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <title>Binding Component Values and Instances to External Data Sources</title>
    <link rel="StyleSheet" href="document.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="catalog.css" type="text/css" media="all" />
    <link rel="Table of Contents" href="J2EETutorialTOC.html" />
    <link rel="Previous" href="JSFPage9.html" />
    <link rel="Next" href="JSFPage11.html" />
    <link rel="Index" href="J2EETutorialIX.html" />

		<!--[if gte IE 5.5000]>
		<script language="JavaScript">
			function correctPNG() { // correctly handle PNG transparency in Win IE 5.5 or higher.
				for(var i=0; i<document.images.length; i++) {
	  			var img = document.images[i]
	  			var imgName = img.src.toUpperCase()
	  			if (imgName.substring(imgName.length-3, imgName.length) == "PNG") {
						var imgID = (img.id) ? "id='" + img.id + "' " : ""
		 				var imgClass = (img.className) ? "class='" + img.className + "' " : ""
		 				var imgTitle = (img.title) ? "title='" + img.title + "' " : "title='" + img.alt + "' "
		 				var imgStyle = "display:inline-block;" + img.style.cssText
		 				if (img.align == "left") imgStyle = "float:left;" + imgStyle
		 				if (img.align == "right") imgStyle = "float:right;" + imgStyle
		 				if (img.parentElement.href) imgStyle = "cursor:hand;" + imgStyle
		 				var strNewHTML = "<span " + imgID + imgClass + imgTitle
		 				+ " style=\"" + "width:" + img.width + "px; height:" + img.height + "px;" + imgStyle + ";"
	     			+ "filter:progid:DXImageTransform.Microsoft.AlphaImageLoader"
		 				+ "(src=\'" + img.src + "\', sizingMethod='scale');\"></span>"
		 				img.outerHTML = strNewHTML
		 				i = i-1
	    		}
      	}
   		}
			window.attachEvent("onload", correctPNG);
		</script>
		<![endif]-->
  </head>

  <body>
		<div id="header">
			<img src="images/tutorialTitle.png" width="154" height="50" alt="The J2EE(TM) 1.4 Tutorial"/>
			<div class="navigation">
				<a accesskey="p" href="JSFPage9.html" title="Previous"><img id="LongDescNotReq1" src="images/previous.png" width="40" height="40" border="0" alt="Prev" /></a><a accesskey="c" href="J2EETutorialFront.html" title="Beginning"><img id="LongDescNotReq1" src="images/up.png" width="40" height="40" border="0" alt="Beginning" /></a><a accesskey="n" href="JSFPage11.html" title="Next"><img id="LongDescNotReq3" src="images/next.png" width="40" height="40" border="0" alt="Next" /></a>
			</div>
			<div id="header-links">
				<a href="index.html" target="_blank">Home</a> | <a href="http://java.sun.com/j2ee/1.4/download.html#tutorial" target="_blank">Download</a> | <a href="J2EETutorial.pdf" target="_blank">PDF</a> | <a href="http://java.sun.com/j2ee/1.4/docs/api/index.html" target="_blank">API</a> | <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/information/faq.html" target="_blank">FAQ</a> | <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/information/search.html" target="_blank">Search</a> | <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/information/sendusmail.html" target="_blank">Feedback</a> | <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/information/history.html" target="_blank">History</a>
			</div>
		</div>

    <blockquote>
<a name="wp119785"> </a><h2 class="pHeading1">
Binding Component Values and Instances to External Data Sources
</h2>
<a name="wp119789"> </a><p class="pBody">
As explained in <a  href="JSFIntro8.html#wp126887">Backing Bean Management</a>, a component tag can wire its component's data to a back-end data object by doing one of the following:
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<a name="wp127818"> </a><div class="pSmartList1"><li>Binding its component's value to a bean property or other external data source</li></div>
<a name="wp127821"> </a><div class="pSmartList1"><li>Binding its component's instance to a bean property</li></div>
</ul></div>
<a name="wp119790"> </a><p class="pBody">
A component tag's <code class="cCode">value</code> attribute uses a value-binding expression to bind a component's value to an external data source, such as a bean property. A component tag's <code class="cCode">binding</code> attribute uses a value-binding expression to bind a component instance to a bean property.
</p>
<a name="wp130781"> </a><p class="pBody">
When referencing the property using the component tag's <code class="cCode">value</code> attribute, you need to use the proper syntax. For example, suppose a backing bean called <code class="cCode">MyBean</code> has this <code class="cCode">int</code> property:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
int currentOption = null;
int getCurrentOption(){...}
void setCurrentOption(int option){...}<a name="wp130800"> </a>
</pre></div>
<a name="wp130796"> </a><p class="pBody">
The value attribute that references this property must have this value-binding expression:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
<code class="cCode">#{MyBean.currentOption}</code><a name="wp130808"> </a>
</pre></div>
<a name="wp119802"> </a><p class="pBody">
In addition to binding a component's value to a bean property, the <code class="cCode">value</code> attribute can specify a literal value or can map the component's data to any primitive (such as <code class="cCode">int</code>), structure (such as an array), or collection (such as a list), independent of a JavaBeans component. <a  href="JSFPage10.html#wp119813">Table 18-8</a> lists some example value-binding expressions that you can use with the <code class="cCode">value</code> attribute.</p><div align="left">
<table border="1" summary="Example Value Binding Expressions" id="wp119813">
  <caption><a name="wp119813"> </a><div class="pTableTitle">
Table 18-8   Example Value-binding Expressions&nbsp;
</div>
</caption>
  <tr align="center">    <th><a name="wp119817"> </a><div class="pCellHeading">
Value
</div>
</th>
    <th><a name="wp119819"> </a><div class="pCellHeading">
Expression
</div>
</th>
</tr>
  <tr align="left">    <td><a name="wp127851"> </a><div class="pCellBody">
A Boolean
</div>
</td>
    <td><a name="wp127853"> </a><div class="pCellBody">
<code class="cCode">cart.numberOfItems &gt; 0</code>
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp119821"> </a><div class="pCellBody">
A property initialized from a context <code class="cCode">init</code> parameter
</div>
</td>
    <td><a name="wp119823"> </a><div class="pCellBody">
<code class="cCode">initParam.quantity</code>
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp119825"> </a><div class="pCellBody">
A bean property
</div>
</td>
    <td><a name="wp119827"> </a><div class="pCellBody">
<code class="cCode">CashierBean.name</code>
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp119829"> </a><div class="pCellBody">
Value in an array
</div>
</td>
    <td><a name="wp119831"> </a><div class="pCellBody">
<code class="cCode">books[3]</code>
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp119833"> </a><div class="pCellBody">
Value in a collection
</div>
</td>
    <td><a name="wp119835"> </a><div class="pCellBody">
<code class="cCode">books[&quot;fiction&quot;]</code>
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp119837"> </a><div class="pCellBody">
Property of an object in an array of objects
</div>
</td>
    <td><a name="wp119840"> </a><div class="pCellBody">
<code class="cCode">books[3].price</code>
</div>
</td>
</tr>
</table>
</div>
<p class="pBody">
</p>
<a name="wp119848"> </a><p class="pBody">
The next two sections explain in more detail how to use the <code class="cCode">value</code> attribute to bind a component's value to a bean property or other external data sources and how to use the <code class="cCode">binding</code> attribute to bind a component instance to a bean property
</p>
<a name="wp119849"> </a><h3 class="pHeading2">
Binding a Component Value to a Property
</h3>
<a name="wp119930"> </a><p class="pBody">
To bind a component's value to a bean property, you specify the name of the bean and the property using the <code class="cCode">value</code> attribute. As explained in <a  href="JSFIntro8.html#wp126887">Backing Bean Management</a>, the value-binding expression of the component tag's <code class="cCode">value</code> attribute must match the corresponding managed bean declaration in the application configuration resource file.
</p>
<a name="wp132121"> </a><p class="pBody">
This means that the name of the bean in the value-binding expression must match the <code class="cCode">managed-bean-name</code> element of the managed bean declaration up to the first . in the expression. Similarly, the part of the value-binding expression after the . must match the name specified in the corresponding <code class="cCode">property-name</code> element in the application configuration resource file.
</p>
<a name="wp130519"> </a><p class="pBody">
For example, consider this managed bean configuration, which configures the <code class="cCode">ImageArea</code> bean corresponding to the North America part of the image map on the <code class="cCode">chooselocale.jsp</code> page of the Duke's Bookstore application:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
&lt;managed-bean&gt;
&nbsp;&nbsp;&lt;managed-bean-name&gt; NA &lt;/managed-bean-name&gt;
&nbsp;&nbsp;&lt;managed-bean-class&gt; model.ImageArea &lt;/managed-bean-class&gt;
&nbsp;&nbsp;&lt;managed-bean-scope&gt; application &lt;/managed-bean-scope&gt;
&nbsp;&nbsp;&lt;managed-property&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;property-name&gt;shape&lt;/property-name&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;poly&lt;/value&gt;
&nbsp;&nbsp;&lt;/managed-property&gt;
&nbsp;&nbsp;&lt;managed-property&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;property-name&gt;alt&lt;/property-name&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;NAmerica&lt;/value&gt;
&nbsp;&nbsp;&lt;/managed-property&gt;
&nbsp;&nbsp;...
&lt;/managed-bean&gt;<a name="wp125934"> </a>
</pre></div>
<a name="wp119935"> </a><p class="pBody">
This example configures a bean called <code class="cCode">NA</code>, which has several properties, one of which is called <code class="cCode">shape</code>. 
</p>
<a name="wp119936"> </a><p class="pBody">
Although the <code class="cCode">area</code> tags on the <code class="cCode">chooselocale.jsp</code> page do not bind to an <code class="cCode">ImageArea</code> property (they bind to the bean itself), to do this, you refer to the property using a value-binding expression from the <code class="cCode">value</code> attribute of the component's tag:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
&lt;h:outputText value=&quot;#{NA.shape}&quot; /&gt;<a name="wp119937"> </a>
</pre></div>
<a name="wp126108"> </a><p class="pBody">
Much of the time you will not include definitions for a managed bean's properties when configuring it. You need to define a property and its value only when you want the property to be initialized with a value when the bean is initialized.
</p>
<a name="wp130526"> </a><p class="pBody">
If a component tag's <code class="cCode">value</code> attribute must refer to a property that is not initialized in the <code class="cCode">managed-bean</code> configuration, the part of the value-binding expression after the . must match the property name as it is defined in the backing bean.
</p>
<a name="wp119941"> </a><p class="pBody">
See <a  href="JSFConfigure2.html#wp1000724">Application Configuration Resource File</a> for information on how to configure beans in the application configuration resource file.
</p>
<a name="wp119945"> </a><p class="pBody">
<a  href="JSFDevelop2.html#wp1003597">Writing Component Properties</a> explains in more detail how to write the backing bean properties for each of the component types.
</p>
<a name="wp119946"> </a><h3 class="pHeading2">
Binding a Component Value to an Implicit Object
</h3>
<a name="wp119947"> </a><p class="pBody">
One external data source that a <code class="cCode">value</code> attribute can refer to is an implicit object. 
</p>
<a name="wp119948"> </a><p class="pBody">
The <code class="cCode">bookreceipt.jsp</code> page of the Duke's Bookstore application includes a reference to an implicit object from a parameter substitution tag:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
&lt;h:outputFormat title=&quot;thanks&quot; 
value=&quot;#{bundle.ThankYouParam}&quot;&gt;
&nbsp;&nbsp;&lt;f:param value=&quot;#{sessionScope.name}&quot;/&gt;
&lt;/h:outputFormat&gt;<a name="wp127887"> </a>
</pre></div>
<a name="wp127933"> </a><p class="pBody">
This tag gets the name of the customer from the session scope and inserts it into the parameterized message at the key <code class="cCode">ThankYouParam</code> from the resource bundle. For example, if the name of the customer is Gwen Canigetit, this tag will render:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
<code class="cCode">Thank you, Gwen Canigetit, for purchasing your books from us.</code><a name="wp127937"> </a>
</pre></div>
<a name="wp119952"> </a><p class="pBody">
The <code class="cCode">name</code> tag on the <code class="cCode">bookcashier.jsp</code> page has the <code class="cCode">NameChanged</code> listener implementation registered on it. This listener saves the customer's name in the session scope when the <code class="cCode">bookcashier.jsp</code> page is submitted. See <a  href="JSFDevelop5.html#wp1003551">Implementing Value-Change Listeners</a> for more information on how this listener works. See <a  href="JSFPage8.html#wp129910">Registering a Value-Change Listener on a Component</a> to learn how the listener is registered on the tag.
</p>
<a name="wp127962"> </a><p class="pBody">
Retrieving values from other implicit objects is done in a similar way to the example shown in this section. <a  href="JSFPage10.html#wp119960">Table 18-9</a> lists the implicit objects that a value attribute can refer to. All of the implicit objects except for the scope objects are read-only and therefore should not be used as a value for a <code class="cCode">UIInput</code> component.</p><div align="left">
<table border="1" summary="Implicit Objects" id="wp119960">
  <caption><a name="wp119960"> </a><div class="pTableTitle">
Table 18-9   Implicit Objects&nbsp; 
</div>
</caption>
  <tr align="center">    <th><a name="wp119964"> </a><div class="pCellHeading">
Implicit Object
</div>
</th>
    <th><a name="wp119966"> </a><div class="pCellHeading">
What It Is
</div>
</th>
</tr>
  <tr align="left">    <td><a name="wp119968"> </a><div class="pCellBody">
<code class="cCode">applicationScope</code>
</div>
</td>
    <td><a name="wp119970"> </a><div class="pCellBody">
A <code class="cCode">Map</code> of the application scope attribute values, keyed by attribute name
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp119972"> </a><div class="pCellBody">
<code class="cCode">cookie</code>
</div>
</td>
    <td><a name="wp119974"> </a><div class="pCellBody">
A <code class="cCode">Map</code> of the cookie values for the current request, keyed by cookie name
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp119976"> </a><div class="pCellBody">
<code class="cCode">facesContext</code>
</div>
</td>
    <td><a name="wp119978"> </a><div class="pCellBody">
The <code class="cCode">FacesContext</code> instance for the current request
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp119980"> </a><div class="pCellBody">
<code class="cCode">header</code>
</div>
</td>
    <td><a name="wp119982"> </a><div class="pCellBody">
A <code class="cCode">Map</code> of HTTP header values for the current request, keyed by header name
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp119984"> </a><div class="pCellBody">
<code class="cCode">headerValues</code>
</div>
</td>
    <td><a name="wp119986"> </a><div class="pCellBody">
A <code class="cCode">Map</code> of <code class="cCode">String</code> arrays containing all the header values for HTTP headers in the current request, keyed by header name
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp119988"> </a><div class="pCellBody">
<code class="cCode">initParam</code>
</div>
</td>
    <td><a name="wp119990"> </a><div class="pCellBody">
A <code class="cCode">Map</code> of the context initialization parameters for this web application
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp119992"> </a><div class="pCellBody">
<code class="cCode">param</code>
</div>
</td>
    <td><a name="wp119994"> </a><div class="pCellBody">
A <code class="cCode">Map</code> of the request parameters for this request, keyed by parameter name
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp119996"> </a><div class="pCellBody">
<code class="cCode">paramValues</code>
</div>
</td>
    <td><a name="wp119998"> </a><div class="pCellBody">
A <code class="cCode">Map</code> of <code class="cCode">String</code> arrays containing all the parameter values for request parameters in the current request, keyed by parameter name
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp120000"> </a><div class="pCellBody">
<code class="cCode">requestScope</code>
</div>
</td>
    <td><a name="wp120002"> </a><div class="pCellBody">
A <code class="cCode">Map</code> of the request attributes for this request, keyed by attribute name
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp120004"> </a><div class="pCellBody">
<code class="cCode">sessionScope</code>
</div>
</td>
    <td><a name="wp120006"> </a><div class="pCellBody">
A <code class="cCode">Map</code> of the session attributes for this request, keyed by attribute name
</div>
</td>
</tr>
  <tr align="left">    <td><a name="wp120008"> </a><div class="pCellBody">
<code class="cCode">view</code>
</div>
</td>
    <td><a name="wp120010"> </a><div class="pCellBody">
The root <code class="cCode">UIComponent</code> in the current component tree stored in the <code class="cCode">FacesRequest</code> for this request
</div>
</td>
</tr>
</table>
</div>
<p class="pBody">
</p>
<a name="wp120011"> </a><h3 class="pHeading2">
Binding a Component Instance to a Bean Property
</h3>
<a name="wp120012"> </a><p class="pBody">
A component instance can be bound to a bean property using a value-binding expression with the <code class="cCode">binding</code> attribute of the component's tag. You usually bind a component instance rather than its value to a bean property if the bean must dynamically change the component's attributes.
</p>
<a name="wp127973"> </a><p class="pBody">
Here are two tags from the <code class="cCode">bookcashier.jsp</code> page that bind components to bean properties:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
&lt;h:selectBooleanCheckbox 
&nbsp;&nbsp;id=&quot;fanClub&quot;
&nbsp;&nbsp;rendered=&quot;false&quot;
&nbsp;&nbsp;binding=&quot;#{cashier.specialOffer}&quot; /&gt;
&lt;h:outputLabel for=&quot;fanClub&quot;
&nbsp;&nbsp;rendered=&quot;false&quot;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;binding=&quot;#{cashier.specialOfferText}&quot;  &gt;
&nbsp;&nbsp;&lt;h:outputText id=&quot;fanClubLabel&quot;
&nbsp;&nbsp;&nbsp;&nbsp;value=&quot;#{bundle.DukeFanClub}&quot;
&nbsp;&nbsp;/&gt;
&lt;/h:outputLabel&gt;<a name="wp134346"> </a>
</pre></div>
<a name="wp132488"> </a><p class="pBody">
The <code class="cCode">selectBooleanCheckbox</code> tag renders a checkbox and binds the <code class="cCode">fanClub</code> <code class="cCode">UISelectBoolean</code> component to the <code class="cCode">specialOffer</code> property of <code class="cCode">CashierBean</code>. The <code class="cCode">outputLabel</code> tag binds the component representing the checkbox's label to the <code class="cCode">specialOfferText</code> property of <code class="cCode">CashierBean</code>. If the application's locale is English, the <code class="cCode">outputLabel</code> tag renders:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
<code class="cCode">I&#39;d like to join the Duke Fan Club, free with my purchase of 
over $100</code><a name="wp134401"> </a>
</pre></div>
<a name="wp132489"> </a><p class="pBody">
The <code class="cCode">rendered</code> attributes of both tags are set to <code class="cCode">false</code>, which prevents the checkbox and its label from being rendered. If the customer orders more than $100 (or 100 euros) worth of books and clicks the <code class="cCode">Submit</code> button, the <code class="cCode">submit</code> method of <code class="cCode">CashierBean</code> sets both components' <code class="cCode">rendered</code> properties to <code class="cCode">true</code>, causing the checkbox and its label to be rendered.
</p>
<a name="wp132490"> </a><p class="pBody">
These tags use component bindings rather than value bindings because the backing bean must dynamically set the values of the components' <code class="cCode">rendered</code> properties.
</p>
<a name="wp132491"> </a><p class="pBody">
If the tags were to use value bindings instead of component bindings, the backing bean would not have direct access to the components, and would therefore require additional code to access the components from the <code class="cCode">FacesContext</code> instance to change the components' <code class="cCode">rendered</code> properties.
</p>
<a name="wp135268"> </a><p class="pBody">
<a  href="JSFDevelop2.html#wp998551">Writing Properties Bound to Component Instances</a> explains how to write the bean properties bound to the example components and also discusses how the <code class="cCode">submit</code> method sets the <code class="cCode">rendered</code> properties of the components.
</p>
    </blockquote>

		<div id="footer">

			<div class="navigation">
				<a accesskey="p" href="JSFPage9.html" title="Previous"><img id="LongDescNotReq1" src="images/previous.png" width="40" height="40" border="0" alt="Prev" /></a><a accesskey="c" href="J2EETutorialFront.html" title="Beginning"><img id="LongDescNotReq1" src="images/up.png" width="40" height="40" border="0" alt="Beginning" /></a><a accesskey="n" href="JSFPage11.html" title="Next"><img id="LongDescNotReq3" src="images/next.png" width="40" height="40" border="0" alt="Next" /></a>
			</div>

			<div id="copyright">
				<p>All of the material in <em>The J2EE(TM) 1.4 Tutorial</em> is <a href="J2EETutorialFront2.html">copyright</a>-protected and may not be published in other works without express written permission from Sun Microsystems.</p>
			</div>
		</div>

  </body>
</html>
