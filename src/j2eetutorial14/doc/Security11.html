<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <title>Propagating Security Identity</title>
    <link rel="StyleSheet" href="document.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="catalog.css" type="text/css" media="all" />
    <link rel="Table of Contents" href="J2EETutorialTOC.html" />
    <link rel="Previous" href="Security10.html" />
    <link rel="Next" href="Security12.html" />
    <link rel="Index" href="J2EETutorialIX.html" />

		<!--[if gte IE 5.5000]>
		<script language="JavaScript">
			function correctPNG() { // correctly handle PNG transparency in Win IE 5.5 or higher.
				for(var i=0; i<document.images.length; i++) {
	  			var img = document.images[i]
	  			var imgName = img.src.toUpperCase()
	  			if (imgName.substring(imgName.length-3, imgName.length) == "PNG") {
						var imgID = (img.id) ? "id='" + img.id + "' " : ""
		 				var imgClass = (img.className) ? "class='" + img.className + "' " : ""
		 				var imgTitle = (img.title) ? "title='" + img.title + "' " : "title='" + img.alt + "' "
		 				var imgStyle = "display:inline-block;" + img.style.cssText
		 				if (img.align == "left") imgStyle = "float:left;" + imgStyle
		 				if (img.align == "right") imgStyle = "float:right;" + imgStyle
		 				if (img.parentElement.href) imgStyle = "cursor:hand;" + imgStyle
		 				var strNewHTML = "<span " + imgID + imgClass + imgTitle
		 				+ " style=\"" + "width:" + img.width + "px; height:" + img.height + "px;" + imgStyle + ";"
	     			+ "filter:progid:DXImageTransform.Microsoft.AlphaImageLoader"
		 				+ "(src=\'" + img.src + "\', sizingMethod='scale');\"></span>"
		 				img.outerHTML = strNewHTML
		 				i = i-1
	    		}
      	}
   		}
			window.attachEvent("onload", correctPNG);
		</script>
		<![endif]-->
  </head>

  <body>
		<div id="header">
			<img src="images/tutorialTitle.png" width="154" height="50" alt="The J2EE(TM) 1.4 Tutorial"/>
			<div class="navigation">
				<a accesskey="p" href="Security10.html" title="Previous"><img id="LongDescNotReq1" src="images/previous.png" width="40" height="40" border="0" alt="Prev" /></a><a accesskey="c" href="J2EETutorialFront.html" title="Beginning"><img id="LongDescNotReq1" src="images/up.png" width="40" height="40" border="0" alt="Beginning" /></a><a accesskey="n" href="Security12.html" title="Next"><img id="LongDescNotReq3" src="images/next.png" width="40" height="40" border="0" alt="Next" /></a>
			</div>
			<div id="header-links">
				<a href="index.html" target="_blank">Home</a> | <a href="http://java.sun.com/j2ee/1.4/download.html#tutorial" target="_blank">Download</a> | <a href="J2EETutorial.pdf" target="_blank">PDF</a> | <a href="http://java.sun.com/j2ee/1.4/docs/api/index.html" target="_blank">API</a> | <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/information/faq.html" target="_blank">FAQ</a> | <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/information/search.html" target="_blank">Search</a> | <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/information/sendusmail.html" target="_blank">Feedback</a> | <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/information/history.html" target="_blank">History</a>
			</div>
		</div>

    <blockquote>
<a name="wp474865"> </a><h2 class="pHeading1">
Propagating Security Identity
</h2>
<a name="wp474867"> </a><p class="pBody">
When you deploy an enterprise bean or web component, you can specify the security identity that will be propagated (illustrated in <a  href="Security11.html#wp474883">Figure 32-8</a>) to enterprise beans invoked from within that component.
</p>
<a name="wp474881"> </a><p class="pBody">
</p><div align="left"><img src="images/security-idPropag.gif" height="164" width="379" alt="Security Identity Propagation" border="0" hspace="0" vspace="0"/>
</div><p class="pBody">
</p>

<p>
  <a name="wp474883"> </a><font >Figure 32-8    Security Identity Propagation</font>
</p>

<a name="wp474884"> </a><p class="pBody">
You can choose one of the following propagation styles:
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<a name="wp474886"> </a><div class="pSmartList1"><li>The caller identity of the intermediate component is propagated to the target enterprise bean. This technique is used when the target container trusts the intermediate container.</li></div>
<a name="wp474888"> </a><div class="pSmartList1"><li>A specific identity is propagated to the target enterprise bean. This technique is used when the target container expects access via a specific identity.</li></div>
</ul></div>
<a name="wp474890"> </a><h3 class="pHeading2">
Configuring a Component's Propagated Security Identity
</h3>
<a name="wp474891"> </a><p class="pBody">
To configure an <em class="cEmphasis">enterprise bean</em>'s propagated security identity, do the following:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp474893"> </a><div class="pSmartList1"><li>Select the enterprise bean to configure.</li></div>
<a name="wp474894"> </a><div class="pSmartList1"><li>In the Security Identity panel of the Security pane, select the security identity that will be propagated to the beans that this enterprise bean calls:</li></div>
<div class="pSmartList2"><ol type="a" class="pSmartList2">
<a name="wp474895"> </a><div class="pSmartList2"><li>If you want the principal of this enterprise bean's caller to be propagated to other beans that it calls, choose Use Caller ID.</li></div>
<a name="wp474896"> </a><div class="pSmartList2"><li>If you want a security identity other than the caller's identity propagated to other beans, choose Run As Role, select the role from the menu, and then select the User In Role from the available users in the selected role.</li></div>
</ol></div>
<a name="wp474897"> </a><div class="pSmartList1"><li>If the role that you want to use as the security identity is not in the list, click Edit Roles and add the role.</li></div>
</ol></div>
<a name="wp474899"> </a><p class="pBody">
To configure a <em class="cEmphasis">web component</em>'s propagated security identity, do the following:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp474900"> </a><div class="pSmartList1"><li>Select the web component to configure.</li></div>
<a name="wp474901"> </a><div class="pSmartList1"><li>In the Security Identity panel of the Security pane, select Use Caller ID if the caller ID is to be propagated to methods of other components called from this web component. Otherwise, select Run As Role, and select a role from the list of known roles in the WAR file.</li></div>
<a name="wp474902"> </a><div class="pSmartList1"><li>If the role that you want to use as the security identity is not in the list, click Edit Roles and add it.</li></div>
</ol></div>
<a name="wp474907"> </a><h3 class="pHeading2">
Configuring Client Authentication
</h3>
<a name="wp474908"> </a><p class="pBody">
If an application component in an application client container accesses a protected method on a bean, use client authentication. 
</p>
<a name="wp474917"> </a><h4 class="pHeading3">
Trust between Containers
</h4>
<a name="wp474918"> </a><p class="pBody">
When an enterprise bean is designed so that either the original caller identity or a designated identity is used to call a target bean, the target bean will receive the propagated identity only; it will <span style="font-style: italic">not</span> receive any authentication data. 
</p>
<a name="wp474919"> </a><p class="pBody">
There is no way for the target container to authenticate the propagated security identity. However, because the security identity is used in authorization checks (for example, method permissions or with the <code class="cCode">isCallerInRole()</code> method), it is vitally important that the security identity be authentic. Because there is no authentication data available to authenticate the propagated identity, the target must trust that the calling container has propagated an authenticated security identity. 
</p>
<a name="wp474920"> </a><p class="pBody">
By default, the Application Server is configured to trust identities that are propagated from different containers. Therefore, there are no special steps that you need to take to set up a trust relationship.
</p>
    </blockquote>

		<div id="footer">

			<div class="navigation">
				<a accesskey="p" href="Security10.html" title="Previous"><img id="LongDescNotReq1" src="images/previous.png" width="40" height="40" border="0" alt="Prev" /></a><a accesskey="c" href="J2EETutorialFront.html" title="Beginning"><img id="LongDescNotReq1" src="images/up.png" width="40" height="40" border="0" alt="Beginning" /></a><a accesskey="n" href="Security12.html" title="Next"><img id="LongDescNotReq3" src="images/next.png" width="40" height="40" border="0" alt="Next" /></a>
			</div>

			<div id="copyright">
				<p>All of the material in <em>The J2EE(TM) 1.4 Tutorial</em> is <a href="J2EETutorialFront2.html">copyright</a>-protected and may not be published in other works without express written permission from Sun Microsystems.</p>
			</div>
		</div>

  </body>
</html>
