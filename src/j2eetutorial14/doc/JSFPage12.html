<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <title>Using Custom Objects</title>
    <link rel="StyleSheet" href="document.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="catalog.css" type="text/css" media="all" />
    <link rel="Table of Contents" href="J2EETutorialTOC.html" />
    <link rel="Previous" href="JSFPage11.html" />
    <link rel="Next" href="JSFDevelop.html" />
    <link rel="Index" href="J2EETutorialIX.html" />

		<!--[if gte IE 5.5000]>
		<script language="JavaScript">
			function correctPNG() { // correctly handle PNG transparency in Win IE 5.5 or higher.
				for(var i=0; i<document.images.length; i++) {
	  			var img = document.images[i]
	  			var imgName = img.src.toUpperCase()
	  			if (imgName.substring(imgName.length-3, imgName.length) == "PNG") {
						var imgID = (img.id) ? "id='" + img.id + "' " : ""
		 				var imgClass = (img.className) ? "class='" + img.className + "' " : ""
		 				var imgTitle = (img.title) ? "title='" + img.title + "' " : "title='" + img.alt + "' "
		 				var imgStyle = "display:inline-block;" + img.style.cssText
		 				if (img.align == "left") imgStyle = "float:left;" + imgStyle
		 				if (img.align == "right") imgStyle = "float:right;" + imgStyle
		 				if (img.parentElement.href) imgStyle = "cursor:hand;" + imgStyle
		 				var strNewHTML = "<span " + imgID + imgClass + imgTitle
		 				+ " style=\"" + "width:" + img.width + "px; height:" + img.height + "px;" + imgStyle + ";"
	     			+ "filter:progid:DXImageTransform.Microsoft.AlphaImageLoader"
		 				+ "(src=\'" + img.src + "\', sizingMethod='scale');\"></span>"
		 				img.outerHTML = strNewHTML
		 				i = i-1
	    		}
      	}
   		}
			window.attachEvent("onload", correctPNG);
		</script>
		<![endif]-->
  </head>

  <body>
		<div id="header">
			<img src="images/tutorialTitle.png" width="154" height="50" alt="The J2EE(TM) 1.4 Tutorial"/>
			<div class="navigation">
				<a accesskey="p" href="JSFPage11.html" title="Previous"><img id="LongDescNotReq1" src="images/previous.png" width="40" height="40" border="0" alt="Prev" /></a><a accesskey="c" href="J2EETutorialFront.html" title="Beginning"><img id="LongDescNotReq1" src="images/up.png" width="40" height="40" border="0" alt="Beginning" /></a><a accesskey="n" href="JSFDevelop.html" title="Next"><img id="LongDescNotReq3" src="images/next.png" width="40" height="40" border="0" alt="Next" /></a>
			</div>
			<div id="header-links">
				<a href="index.html" target="_blank">Home</a> | <a href="http://java.sun.com/j2ee/1.4/download.html#tutorial" target="_blank">Download</a> | <a href="J2EETutorial.pdf" target="_blank">PDF</a> | <a href="http://java.sun.com/j2ee/1.4/docs/api/index.html" target="_blank">API</a> | <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/information/faq.html" target="_blank">FAQ</a> | <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/information/search.html" target="_blank">Search</a> | <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/information/sendusmail.html" target="_blank">Feedback</a> | <a href="http://java.sun.com/j2ee/1.4/docs/tutorial/information/history.html" target="_blank">History</a>
			</div>
		</div>

    <blockquote>
<a name="wp132247"> </a><h2 class="pHeading1">
Using Custom Objects
</h2>
<a name="wp129091"> </a><p class="pBody">
As a page author, you might need to use custom converters, validators, or components packaged with the application on your JSP pages. 
</p>
<a name="wp130661"> </a><p class="pBody">
A custom converter is applied to a component either by using the component tag's <code class="cCode">converter</code> attribute or by nesting a <code class="cCode">converter</code> tag inside the component's tag. 
</p>
<a name="wp130662"> </a><p class="pBody">
A custom validator is applied to a component by nesting either a <code class="cCode">validator</code> tag or the validator's custom tag inside the component's tag. 
</p>
<a name="wp130667"> </a><p class="pBody">
To use a custom component, you use the custom tag associated with the component.
</p>
<a name="wp129994"> </a><p class="pBody">
As explained in <a  href="JSFPage3.html#wp120801"></a><a  href="JSFPage3.html#wp120801"></a><a  href="JSFPage3.html#wp120801">Setting Up a Page</a>, you must ensure that the TLD that defines the custom tags is packaged in the application. TLD files are stored in the <code class="cCode">WEB-INF</code> directory or subdirectory of the WAR file or in the <code class="cCode">META-INF/</code> directory or subdirectory of a tag library packaged in a JAR.
</p>
<a name="wp130010"> </a><p class="pBody">
Next, you include a <code class="cCode">taglib</code> declaration in the page so that the page has access to the tags. All custom objects for the Duke's Bookstore application are defined in <code class="cCode">bookstore.tld</code>. Here is the <code class="cCode">taglib</code> declaration that you would include on your page so that you can use the tags from this TLD:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
&lt;%@ taglib uri=&quot;/WEB-INF/bookstore.tld&quot; prefix=&quot;bookstore&quot; %&gt;<a name="wp130015"> </a>
</pre></div>
<a name="wp130021"> </a><p class="pBody">
When including the custom tag in the page, you can consult the TLD to determine which attributes the tag supports and how they are used.
</p>
<a name="wp130011"> </a><p class="pBody">
The next three sections describe how to use the custom converter, validator, and UI components included in the Duke's Bookstore application.
</p>
<a name="wp130060"> </a><h3 class="pHeading2">
Using a Custom Converter
</h3>
<a name="wp130062"> </a><p class="pBody">
To apply the data conversion performed by a custom converter to a particular component's value, you must either set the <code class="cCode">converter</code> attribute of the component's tag to the <code class="cCode">Converter</code> implementation's identifier or set the nested <code class="cCode">converter</code> tag's <code class="cCode">converterId</code> attribute to the <code class="cCode">Converter</code> implementation's identifier. The application architect provides this identifier when registering the <code class="cCode">Converter</code> implementation with the application, as explained in <a  href="JSFConfigure6.html#wp999326">Registering a Custom Converter</a>. <a  href="JSFDevelop4.html#wp1003484">Creating a Custom Converter</a> explains how a custom converter is implemented.
</p>
<a name="wp130065"> </a><p class="pBody">
The identifier for the credit card converter is <code class="cCode">CreditCardConverter</code>. The <code class="cCode">CreditCardConverter</code> instance is registered on the <code class="cCode">ccno</code> component, as shown in this tag from the <code class="cCode">bookcashier.jsp</code> page:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
&lt;h:inputText id=&quot;ccno&quot;
&nbsp;&nbsp;size=&quot;19&quot;
&nbsp;&nbsp;converter=&quot;CreditCardConverter&quot;
&nbsp;&nbsp;required=&quot;true&quot;&gt;
&nbsp;&nbsp;...
&lt;/h:inputText&gt;<a name="wp130084"> </a>
</pre></div>
<a name="wp130069"> </a><p class="pBody">
By setting the <code class="cCode">converter</code> attribute of a component's tag to the converter's identifier, you cause that component's local value to be automatically converted according to the rules specified in the <code class="cCode">Converter</code> implementation.
</p>
<a name="wp130071"> </a><p class="pBody">
A page author can use the same custom converter with any similar component by simply supplying the <code class="cCode">Converter</code> implementation's identifier to the <code class="cCode">converter</code> attribute of the component's tag or to the <code class="cCode">convertId</code> attribute of a nested <code class="cCode">converter</code> tag.
</p>
<a name="wp129064"> </a><h3 class="pHeading2">
Using a Custom Validator
</h3>
<a name="wp129067"> </a><p class="pBody">
To use a custom validator in a JSP page, you must either
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<a name="wp136250"> </a><div class="pSmartList1"><li>Nest the validator's custom tag inside the tag of the component whose value you want to be validated by the custom validator.</li></div>
<a name="wp136251"> </a><div class="pSmartList1"><li>Nest a <code class="cCode">validator</code> tag within the tag of the component and reference the <code class="cCode">Validator</code> implementation from the <code class="cCode">validator</code> tag.</li></div>
</ul></div>
<a name="wp129168"> </a><p class="pBody">
Here is the custom <code class="cCode">formatValidator</code> tag from the <code class="cCode">ccno </code>field on the <code class="cCode">bookcashier.jsp</code> page of the Duke's Bookstore application: 
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
&lt;h:inputText id=&quot;ccno&quot; size=&quot;19&quot;
&nbsp;&nbsp;...
&nbsp;&nbsp;required=&quot;true&quot;&gt;
&nbsp;&nbsp;&lt;bookstore:formatValidator 
&nbsp;&nbsp;&nbsp;&nbsp;formatPatterns=&quot;9999999999999999|9999 9999 9999 9999|
&nbsp;&nbsp;&nbsp;&nbsp;9999-9999-9999-9999&quot; /&gt;
&lt;/h:inputText&gt;
&lt;h:message styleClass=&quot;validationMessage&quot;  for=&quot;ccno&quot;/&gt; <a name="wp130191"> </a>
</pre></div>
<a name="wp129077"> </a><p class="pBody">
This tag validates the input of the <code class="cCode">ccno</code> field against the patterns defined by the page author in the <code class="cCode">formatPatterns</code> attribute.
</p>
<a name="wp129062"> </a><p class="pBody">
You can use the same custom validator for any similar component by simply nesting the custom validator tag within the component tag.
</p>
<a name="wp129786"> </a><p class="pBody">
<a  href="JSFDevelop6.html#wp999130">Creating a Custom Validator</a> describes how to create the custom validator and its custom tag.
</p>
<a name="wp129974"> </a><p class="pBody">
If the application developer who created the custom validator prefers to configure the attributes in the <code class="cCode">Validator</code> implementation rather than allow the page author to configure the attributes from the page, the developer will not create a custom tag for use with the validator. Instead, the page author must follow these steps:
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp130202"> </a><div class="pSmartList1"><li>Nest the <code class="cCode">validator</code> tag inside the tag of the component whose data needs to be validated.</li></div>
<a name="wp130205"> </a><div class="pSmartList1"><li>Set the <code class="cCode">validator</code> tag's <code class="cCode">validatorId</code> attribute to the ID of the validator that is defined in the application configuration resource file. <a  href="JSFConfigure5.html#wp999186">Registering a Custom Validator</a> explains how to configure the validator in the application configuration resource file.</li></div>
</ol></div>
<a name="wp130206"> </a><p class="pBody">
The following tag registers a hypothetical validator on a component using a <code class="cCode">validator</code> tag and referencing the ID of the validator:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
&lt;h:inputText id=&quot;name&quot; value=&quot;#{CustomerBean.name}&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size=&quot;10&quot; ... &gt;
&nbsp;&nbsp;&lt;f:validator validatorId=&quot;customValidator&quot; /&gt;
&nbsp;&nbsp;...
&lt;/h:inputText&gt;<a name="wp129976"> </a>
</pre></div>
<a name="wp129158"> </a><h3 class="pHeading2">
Using a Custom Component
</h3>
<a name="wp129237"> </a><p class="pBody">
In order to use a custom component in a page, you need to declare the tag library that defines the custom tag that renders the custom component. This is explained in <a  href="JSFPage12.html#wp132247">Using Custom Objects</a>.
</p>
<a name="wp130230"> </a><p class="pBody">
The Duke's Bookstore application includes a custom image map component on the <code class="cCode">chooselocale.jsp</code> page. This component allows you to select the locale for the application by clicking on a region of the image map:
</p>
<div class="pPreformattedRelative"><pre class="pPreformattedRelative">
...
&lt;h:graphicImage id=&quot;mapImage&quot; url=&quot;/template/world.jpg&quot;
&nbsp;&nbsp;alt=&quot;#{bundle.chooseLocale}&quot;
&nbsp;&nbsp;usemap=&quot;#worldMap&quot; /&gt;
&nbsp;&nbsp;&lt;bookstore:map id=&quot;worldMap&quot; current=&quot;NAmericas&quot; 
&nbsp;&nbsp;&nbsp;&nbsp;immediate=&quot;true&quot;
&nbsp;&nbsp;&nbsp;&nbsp;action=&quot;bookstore&quot;
&nbsp;&nbsp;&nbsp;&nbsp;actionListener=&quot;#{localeBean.chooseLocaleFromMap}&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;bookstore:area id=&quot;NAmerica&quot; value=&quot;#{NA}&quot; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onmouseover=&quot;/template/world_namer.jpg&quot; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onmouseout=&quot;/template/world.jpg&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;targetImage=&quot;mapImage&quot; /&gt;
&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;&lt;bookstore:area id=&quot;France&quot; value=&quot;#{fraA}&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onmouseover=&quot;/template/world_france.jpg&quot; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onmouseout=&quot;/template/world.jpg&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;targetImage=&quot;mapImage&quot; /&gt;
&lt;/bookstore:map&gt;<a name="wp129246"> </a>
</pre></div>
<a name="wp129756"> </a><p class="pBody">
The <code class="cCode">graphicImage</code> tag associates an image (<code class="cCode">world.jpg</code>) with an image map that is referenced in the <code class="cCode">usemap</code> attribute value.
</p>
<a name="wp129758"> </a><p class="pBody">
The custom <code class="cCode">map</code> tag that represents the custom component, <code class="cCode">MapComponent</code>, specifies the image map, and contains a set of <code class="cCode">area</code> tags. Each custom <code class="cCode">area</code> tag represents a custom <code class="cCode">AreaComponent</code> and specifies a region of the image map. 
</p>
<a name="wp134549"> </a><p class="pBody">
On the page, the <code class="cCode">onmouseover</code> and <code class="cCode">onmouseout</code> attributes define the image that is displayed when the user performs the actions described by the attributes. The page author defines what these images are. The custom renderer also renders an <code class="cCode">onclick</code> attribute.
</p>
<a name="wp134579"> </a><p class="pBody">
In the rendered HTML page, the <code class="cCode">onmouseover</code>, <code class="cCode">onmouseout</code>, and <code class="cCode">onclick</code> attributes define which JavaScript code is executed when these events occur. When the user moves the mouse over a region, the <code class="cCode">onmouseover</code> function associated with the region displays the map with that region highlighted. When the user moves the mouse out of a region, the <code class="cCode">onmouseout</code> function redisplays the original image. When the user clicks a region, the <code class="cCode">onclick</code> function sets the value of a hidden <code class="cCode">input</code> tag to the ID of the selected area and submits the page.
</p>
<a name="wp134565"> </a><p class="pBody">
When the custom renderer renders these attributes in HTML, it also renders the JavaScript code. The custom renderer also renders the entire <code class="cCode">onclick</code> attribute rather than let the page author set it.
</p>
<a name="wp114890"> </a><p class="pBody">
The custom renderer that renders the <code class="cCode">map</code> tag also renders a hidden <code class="cCode">input</code> component that holds the current area. The server-side objects retrieve the value of the hidden <code class="cCode">input</code> field and set the locale in the <code class="cCode">FacesContext</code> instance according to which region was selected.
</p>
<a name="wp129794"> </a><p class="pBody">
Chapter&nbsp;<a  href="JSFCustom.html#wp83291">20</a> describes the custom tags in more detail and also explains how to create the custom image map components, renderers, and tags. 
</p>
<a name="wp130233"> </a><p class="pBody">

</p>
    </blockquote>

		<div id="footer">

			<div class="navigation">
				<a accesskey="p" href="JSFPage11.html" title="Previous"><img id="LongDescNotReq1" src="images/previous.png" width="40" height="40" border="0" alt="Prev" /></a><a accesskey="c" href="J2EETutorialFront.html" title="Beginning"><img id="LongDescNotReq1" src="images/up.png" width="40" height="40" border="0" alt="Beginning" /></a><a accesskey="n" href="JSFDevelop.html" title="Next"><img id="LongDescNotReq3" src="images/next.png" width="40" height="40" border="0" alt="Next" /></a>
			</div>

			<div id="copyright">
				<p>All of the material in <em>The J2EE(TM) 1.4 Tutorial</em> is <a href="J2EETutorialFront2.html">copyright</a>-protected and may not be published in other works without express written permission from Sun Microsystems.</p>
			</div>
		</div>

  </body>
</html>
